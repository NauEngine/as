as_proto
========

Getting Started
---------------

### Пререквизиты
- `cmake`, `ninja`, какой-нибудь C++ компилятор
- `LLVM 17.0.6`. Для macOS, arm64 поддерживается скачиванием собранных бинарных файлов

Переменная окружения `LLVM_ROOT_DIR` должна указывать на директорию, в которой содержатся собранные бинарные файлы LLVM
версии 17.0.6 (в этой директории должны быть директории `bin`, `include`, `lib` и другие). Если эта переменная не
указана, то при выполнении `cmake` собранные бинарные файлы будут скачаны. Однако на текущий момент скачивание
поддерживается только для macOS, arm64

```shell
git clone git@github.com:NauEngine/as_proto.git
cd as_proto
```

#### Сборка из командной строки
```shell
cmake -DCMAKE_BUILD_TYPE=Debug -G Ninja -S . -B ./build
cmake --build ./build --target AScriptTest -j 8
./build/test/AScriptTest
```

#### Сборка из CLion
Просто открыть проект с CLion и прописать переменную окружения `LLVM_ROOT_DIR`


### Отладка

В jit включена поддержка Debug Info, и, если верить обрывочным сведеньям в интернете, отладчики GDB и LLDB поддерживают
Debug Info в jit'ed коде.

В macOS в LLDB по умолчанию отключена поддержка отладки jit'ed кода, ее надо включать индивидуально. Можно включить
один раз, добавив файл `~/.lldbinit` со следующим содержанием:
```
settings set plugin.jit-loader.gdb.enable on
```

После этого отладка заработает как в CLion (на macOS в CLion по умолчанию используется встроенный LLDB), так и просто в
LLDB


Документация
------------
- [Стандарт оформления кода](./docs/coding_style_guide.md)
- [Описание архитектуры](./docs/architecture.md)
- [Описание текущих тестов](./docs/howto_test.md)
- [Реализация поддержки нового скриптового языка](./docs/howto_new_language.md)
- [Дальнейшее развитие](./docs/whats_next.md)